<!DOCTYPE html>
<html ng-app="OptionsApp" ng-csp ng-controller="OptionsController">

    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title get-message="OptionsPageTitle"></title>
    </head>

    <body class="pad-y-sm pad-x-0">

        <!-- BEGIN SETTINGS -->

        <form name="optionsForm" class="container-fluid">

            <div class="alert alert-secondary text-small" get-message="OptionsPerDeviceWarning"></div>

            <fieldset>
                <legend class="text-primary" get-message="OptionsBehaviorHeading"></legend>

                <ng-form name="behaviorTargetForm">

                    <div class="input-field">
                        <label>
                            <input type="radio" name="behaviorTarget" value="window" ng-model="options.behavior.target" ng-required />
                            <span get-message="OptionsBehaviorTargetWindowLabel"></span>
                            <p class="input-hint" get-message="OptionsBehaviorTargetWindowDescription"></p>
                        </label>

                    </div>

                    <div class="input-field">
                        <label>
                            <input type="radio" name="behaviorTarget" value="tab" ng-model="options.behavior.target" ng-required />
                            <span get-message="OptionsBehaviorTargetTabLabel"></span>
                            <p class="input-hint" get-message="OptionsBehaviorTargetTabDescription"></p>
                        </label>
                    </div>

                </ng-form>

            </fieldset>

            <fieldset>
                <legend class="text-primary" get-message="OptionsSizeHeading"></legend>

                <div class="alert alert-warning text-small" ng-hide="options.behavior.target === 'window'" get-message="OptionsBehaviorTabWarning"></div>

                <div ng-show="options.behavior.target === 'window'">

                    <ng-form name="sizeModeForm">

                        <div class="input-field">
                            <label>
                                <input type="radio" name="sizeMode" value="current" ng-model="options.size.mode" ng-required>
                                <span get-message="OptionsSizeModeCurrentLabel"></span>
                                <p class="input-hint" get-message="OptionsSizeModeCurrentDescription"></p>
                            </label>
                        </div>

                        <div class="input-field mar-b-0">
                            <label>
                                <input type="radio" name="sizeMode" value="custom" ng-model="options.size.mode" ng-required>
                                <span get-message="OptionsSizeModeCustomLabel"></span><br />
                                <p class="input-hint" get-message="OptionsSizeModeCustomDescription"></p>
                            </label>
                        </div>

                    </ng-form>

                    <div class="container-fluid mar-t-sm" ng-show="options.size.mode === 'custom'">

                        <div ng-form="sizeDimensionsForm" class="input-field mar-b-0">
                            <div class="row">

                                <div class="col">
                                    <div class="input-field">
                                        <label for="sizeModeUnits" get-message="DimensionUnitsLabel"></label>
                                        <select class="input-lg" name="sizeModeUnits" id="sizeModeUnits" ng-model="options.size.units" ng-required>
                                            <option value="pixels" get-message="DimensionUnitsPixelsOptionLabel"></option>
                                            <option value="percentage" get-message="DimensionUnitsPercentageOptionLabel"></option>
                                        </select>
                                    </div>
                                </div>

                            </div>

                            <div class="row">

                                <div class="col">
                                    <div class="input-field" ng-class="{'input-invalid': optionsForm.sizeDimensionsForm.sizeWidth.$invalid}">
                                        <label for="sizeWidth" get-message="WidthLabel"></label>
                                        <div class="input-group">
                                            <input type="number" class="input-lg" name="sizeWidth" id="sizeWidth" pattern="\d+" ng-min="sizeMin('width')" ng-max="sizeMax('width')" ng-model="options.size.width" ng-model-options="{ debounce: 200 }" ng-required="(options.behavior.target === 'window') && (options.size.mode === 'custom')" />
                                            <span class="input-addon input-addon-lg">{{sizeUnits()}}</span>
                                        </div>
                                        <p class="input-hint text-danger" ng-messages="optionsForm.sizeDimensionsForm.sizeWidth.$error">
                                            <span get-message="FieldRequiredMessage"></span>
                                            <span get-message="FieldPatternNumberMessage"></span>
                                            <span get-message="FieldMinValuePlaceholderMessage" substitutions="{{sizeMin('width')}}"></span>
                                            <span get-message="FieldMaxValuePlaceholderMessage" substitutions="{{sizeMax('height')}}"></span>
                                        </p>
                                    </div>
                                </div>

                                <div class="col">
                                    <div class="input-field" ng-class="{'input-invalid': optionsForm.sizeDimensionsForm.sizeHeight.$invalid}">
                                        <label for="sizeHeight" get-message="HeightLabel"></label>
                                        <div class="input-group">
                                            <input type="number" class="input-lg" name="sizeHeight" id="sizeHeight" pattern="\d+" ng-min="sizeMin('height')" ng-max="sizeMax('height')" ng-model="options.size.height" ng-model-options="{ debounce: 200 }" ng-required="(options.behavior.target === 'window') && (options.size.mode === 'custom')" />
                                            <span class="input-addon input-addon-lg">{{sizeUnits()}}</span>
                                        </div>
                                        <p class="input-hint text-danger" ng-messages="optionsForm.sizeDimensionsForm.sizeHeight.$error">
                                            <span get-message="FieldRequiredMessage"></span>
                                            <span get-message="FieldPatternNumberMessage"></span>
                                            <span get-message="FieldMinValuePlaceholderMessage" substitutions="{{sizeMin('width')}}"></span>
                                            <span get-message="FieldMaxValuePlaceholderMessage" substitutions="{{sizeMax('height')}}"></span>
                                        </p>
                                    </div>
                                </div>

                                <div class="col-12" ng-class="{'mar-t-lg': (optionsForm.sizeDimensionsForm.sizeWidth.$valid && optionsForm.sizeDimensionsForm.sizeHeight.$valid)}">
                                    <table class="table-bordered">
                                        <tbody>
                                            <tr>
                                                <td get-message="InfoCurrentScreenResolutionLabel"></td>
                                                <td class="text-bold" ng-bind-html="resolution"></td>
                                            </tr>
                                            <tr ng-show="options.size.units === 'percentage'">
                                                <td get-message="InfoPopoutPlayerWindowSizeLabel"></td>
                                                <td class="text-bold" ng-bind-html="showInfo('dimensions')"></td>
                                            </tr>
                                            <tr>
                                                <td get-message="InfoPopoutPlayerAspectRatioLabel"></td>
                                                <td class="text-bold" ng-bind-html="showInfo('aspectRatio')"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>

                    </div>

                </div>

            </fieldset>

            <fieldset ng-show="isFirefox">
                <legend class="text-primary" get-message="OptionsAdvancedHeading"></legend>

                <div class="input-field">
                    <label get-message="OptionsAdvancedTitleLabel"></label>
                    <input type="text" name="advancedTitle" ng-model="options.advanced.title" ng-trim="false" ng-disabled="options.behavior.target !== 'window'" />
                    <p class="input-hint text-warning" ng-hide="options.behavior.target === 'window'"><i class="fa fa-warning"></i> <span get-message="OptionsBehaviorTabWarning"></span></p>
                    <p class="input-hint text-primary" ng-show="optionsForm.advancedTitle.$dirty && optionsForm.advancedTitle.$valid"><i class="fa fa-check-square-o"></i> <i18n message="OptionsSaveSettingsReminder"></i18n></p>
                    <p class="input-hint" get-message="OptionsAdvancedTitleDescription"></p>
                </div>

            </fieldset>

            <div class="row">
                <div class="col-6">
                    <button class="button button-block" ng-class="{'button-light': optionsForm.$pristine}" ng-click="save()" ng-disabled="optionsForm.$pristine || optionsForm.$invalid" get-message="ButtonSaveLabel"></button>
                </div>
                <div class="col-6">
                    <button class="button button-block button-danger" ng-click="confirmReset()" get-message="ButtonResetLabel"></button>
                </div>
            </div>

            <div class="row mar-t-lg" ng-show="alerts && alerts.length">
                <div class="col">

                    <div class="fade alert alert-{{alert.type}}" ng-class="{'alert-dismissible': alert.dismissible, 'alert-timed': alert.duration}" ng-repeat="alert in alerts" style="--duration: {{alert.duration}}s">
                        <div ng-bind-html="alert.message"></div>
                        <a class="close" ng-click="removeAlert(alert)" ng-if="alert.dismissible">
                            <span class="x">&times</span>
                            <div class="timer-left"></div>
                            <div class="timer-right"></div>
                        </a>
                    </div>

                </div>
            </div>

        </form>

        <dialog id="ResetConfirmDialog">
            <div class="container">

                <div class="row">
                    <div class="col">
                        <h3 class="mar-b-md" get-message="ConfirmSettingsResetHeading"></h3>
                        <p get-message="ConfirmSettingsResetText"></p>
                        <hr />
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <button type="button" class="button-block" ng-click="reset()" get-message="ButtonConfirmResetLabel"></button>
                    </div>
                    <div class="col">
                        <button type="button" class="button-block button-secondary" ng-click="cancelReset()" get-message="ButtonCancelResetLabel"></button>
                    </div>
                </div>

            </div>
        </dialog>

        <!-- END SETTINGS -->

    </body>

</html>
